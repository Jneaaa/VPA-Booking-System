<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Dashboard - Manage Facilities</title>
  <!-- Combined CSS resources -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/admin-styles.css">
</head>
<body>
  <!-- Top Bar -->
  <header id="topbar" class="d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center">
      <img src="../cpu-logo.png" alt="CPU Logo" class="me-2" style="height: 40px;">
      <span class="fw-bold">CPU Facilities and Equipment Management</span>
    </div>
    <div class="d-flex align-items-center">
      <!--Notifications-->
      <div class="position-relative me-3">
        <div class="dropdown">
          <i class="bi bi-bell fs-4 position-relative" id="notificationIcon" data-bs-toggle="dropdown" aria-expanded="false"></i>
          <span class="notification-badge">1</span>
          <ul class="dropdown-menu dropdown-menu-end p-0" id="notificationDropdown" aria-labelledby="notificationIcon">
            <li class="dropdown-header">Notifications</li>
            <li>
              <a href="#" class="notification-item unread d-block" data-notification-id="1">
                <div class="notification-title">New Facility Request</div>
                <div class="notification-text">John Smith requested the Main Auditorium for March 15, 2024</div>
                <div class="notification-time">2 minutes ago</div>
              </a>
            </li>
            <li>
              <a href="#" class="notification-item d-block">
                <div class="notification-title">Booking Approved</div>
                <div class="notification-text">Your equipment request for the sound system has been approved</div>
                <div class="notification-time">3 hours ago</div>
              </a>
            </li>
            <li><hr class="dropdown-divider m-0"></li>
            <li><a href="#" class="dropdown-item view-all-item text-center">View all notifications</a></li>
          </ul>
        </div>
      </div>
      <!-- Dropdown Menu -->
      <div class="dropdown">
        <button class="btn btn-link p-0 text-white" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-three-dots fs-4"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Account Settings</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="adminlogin.html"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
        </ul>
      </div>
    </div>
  </header>
  <!-- Main Layout -->
  <div id="layout">
    <!-- Sidebar -->
    <nav id="sidebar">
      <div class="text-center mb-4">
        <div class="position-relative d-inline-block">
          <img src="assets/admin-pic.jpg" alt="Admin Profile" class="profile-img rounded-circle">
          <span class="status-indicator"></span>
        </div>
        <h5 class="mt-3 mb-1">John Doe</h5>
        <p class="text-muted mb-0">Head Admin</p>
      </div>
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" href="dashboard.html">
            <i class="bi bi-speedometer2 me-2"></i>
            Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="calendar.html">
            <i class="bi bi-calendar-event me-2"></i>
            Calendar
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">
            <i class="bi bi-file-earmark-text me-2"></i>
            Requisitions
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="#">
            <i class="bi bi-building me-2"></i>
            Facilities
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">
            <i class="bi bi-tools me-2"></i>
            Equipment
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">
            <i class="bi bi-people me-2"></i>
            Admin Roles
          </a>
        </li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main id="main">
        <div class="container-fluid bg-light rounded p-4">
      <div class="container-fluid">
        <!-- Header & Controls -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Manage Facilities</h2>
            <div>
                <a href="add-facility.html" class="btn btn-primary">
                    <i class="bi bi-plus-circle-fill me-2"></i>Add New Facility
                </a>
             </div>
        </div>

       <!-- Filters & Search Bar -->
<div class="row mb-3 g-2">  <!-- Changed gutter to g-2 (smaller gap between columns) -->
    <div class="col-sm-6 col-md-2 col-lg-2">  <!-- Added responsive breakpoints -->
        <select id="layoutSelect" class="form-select">
            <option value="grid">Grid Layout</option>
            <option value="list">List Layout</option>
        </select>
    </div>
    <div class="col-sm-6 col-md-2 col-lg-2">
        <select id="statusFilter" class="form-select">
            <option value="all">All Statuses</option>
            <option value="available">Available</option>
            <option value="unavailable">Unavailable</option>
            <option value="reserved">Reserved</option>
        </select>
    </div>
    <div class="col-sm-6 col-md-2 col-lg-2">
        <select id="departmentFilter" class="form-select">
            <option value="all">All Departments</option>
            <option value="CCS">CCS Department</option>
            <option value="CBA">CBA Department</option>
            <option value="CAS">CAS Department</option>
        </select>
    </div>
    <div class="col-sm-6 col-md-2 col-lg-2">
        <select id="categoryFilter" class="form-select">
            <option value="all">All Categories</option>
            <option value="Sports">Sports Venues</option>
            <option value="Rooms">Rooms</option>
            <option value="Buildings">Buildings</option>
        </select>
    </div>
    <div class="col-sm-12 col-md-4 col-lg-4">
        <div class="search-container">
            <i class="bi bi-search"></i>
            <input type="text" id="searchInput" class="form-control" placeholder="Search Facilities...">
        </div>
    </div>
</div>

        <!-- Facilities List -->
        <div id="facilityContainer" class="row g-3">
            <!-- Volleyball Court -->
            <div class="col-md-4 facility-card" data-status="available" data-department="CBA" data-category="Sports" data-title="Volleyball Court">
                <div class="card">
                    <img src="assets/volleyball-court.jpg" class="card-img-top" alt="Facility Cover">
                    <div class="card-body d-flex flex-column">
                        <div>
                            <h5 class="card-title">Volleyball Court</h5>
                            <p class="card-text text-muted mb-2">
                                <i class="bi bi-tag-fill text-primary"></i> Sports Facility | 
                                <i class="bi bi-diagram-2-fill text-primary"></i> Court | 
                                <i class="bi bi-building-fill text-primary"></i> CBA
                            </p>
                            <p class="status-available">Available</p>
                            <p class="card-text mb-3">Indoor volleyball court located inside the University Gym, featuring a standard playing surface, regulation net, and ample space for training, classes, or recreational games. Bleacher seating available for spectators.</p>
                        </div>
                        <div class="facility-actions mt-auto pt-3">
                            <button class="btn btn-manage">Manage</button>
                            <button class="btn btn-outline-danger btn-delete">Delete</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Conference Room -->
            <div class="col-md-4 facility-card" data-status="reserved" data-department="CCS" data-category="Rooms" data-title="Conference Room (2nd Floor)">
                <div class="card">
                    <img src="assets/conference-room.jpg" class="card-img-top" alt="Facility Cover">
                    <div class="card-body d-flex flex-column">
                        <div>
                            <h5 class="card-title">Conference Room (2nd Floor)</h5>
                            <p class="card-text text-muted mb-2">
                                <i class="bi bi-tag-fill text-primary"></i> Room | 
                                <i class="bi bi-diagram-2-fill text-primary"></i> Conference | 
                                <i class="bi bi-building-fill text-primary"></i> CCS
                            </p>
                            <p class="status-reserved">Reserved</p>
                            <p class="card-text mb-3">A formal meeting space equipped with tables, chairs, projector, and whiteboard. Ideal for seminars, presentations, academic discussions, and organizational meetings. Located in Henrilous Library, 2nd Floor.</p>
                        </div>
                        <div class="facility-actions mt-auto pt-3">
                            <button class="btn btn-manage">Manage</button>
                            <button class="btn btn-outline-danger btn-delete">Delete</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- University Church -->
            <div class="col-md-4 facility-card" data-status="unavailable" data-department="CAS" data-category="Buildings" data-title="University Church">
                <div class="card">
                    <img src="assets/uni-church.jpg" class="card-img-top" alt="Facility Cover">
                    <div class="card-body d-flex flex-column">
                        <div>
                            <h5 class="card-title">University Church</h5>
                            <p class="card-text text-muted mb-2">
                                <i class="bi bi-tag-fill text-primary"></i> Building | 
                                <i class="bi bi-diagram-2-fill text-primary"></i> Church | 
                                <i class="bi bi-building-fill text-primary"></i> CAS
                            </p>
                            <p class="status-unavailable">Unavailable</p>
                            <p class="card-text mb-3">A spacious, multi-purpose venue within campus grounds used for religious services, ceremonies, and university events. Equipped with audio systems, seating, and a peaceful atmosphere suitable for gatherings and reflections.</p>
                        </div>
                        <div class="facility-actions mt-auto pt-3">
                            <button class="btn btn-manage">Manage</button>
                            <button class="btn btn-outline-danger btn-delete">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
      </div>
    </main>
  </div>

  <!-- Event Modal -->
  <div class="modal fade" id="eventModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Event Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <strong>Title:</strong> <span id="eventTitle"></span>
            </li>
            <li class="list-group-item">
              <strong>Date:</strong> <span id="eventDate"></span>
            </li>
            <li class="list-group-item">
              <strong>Time:</strong> <span id="eventTime">10:00 AM - 12:00 PM</span>
            </li>
            <li class="list-group-item">
              <strong>Description:</strong> <span id="eventDescription"></span>
            </li>
          </ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
 <!-- Combined JS resources -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="js/global.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
        const facilityContainer = document.getElementById('facilityContainer');
        const searchInput = document.getElementById('searchInput');
        const layoutSelect = document.getElementById('layoutSelect');
        const statusFilter = document.getElementById('statusFilter');
        const departmentFilter = document.getElementById('departmentFilter');
        const categoryFilter = document.getElementById('categoryFilter');
        
        // Filter facilities based on all criteria
        function filterFacilities() {
            const searchTerm = searchInput.value.toLowerCase();
            const status = statusFilter.value;
            const department = departmentFilter.value;
            const category = categoryFilter.value;
            const layout = layoutSelect.value;
            
            // Apply layout view
            facilityContainer.className = `row g-3 ${layout === 'list' ? 'list-view' : ''}`;
            
            document.querySelectorAll('.facility-card').forEach(card => {
                const cardStatus = card.dataset.status;
                const cardDept = card.dataset.department;
                const cardCategory = card.dataset.category;
                const cardTitle = card.dataset.title.toLowerCase();
                const cardText = card.querySelector('.card-text').textContent.toLowerCase();
                
                const matchesSearch = cardTitle.includes(searchTerm) || 
                                    cardText.includes(searchTerm);
                const matchesStatus = (status === 'all' || cardStatus === status);
                const matchesDept = (department === 'all' || cardDept === department);
                const matchesCategory = (category === 'all' || cardCategory === category);
                
                card.style.display = (matchesSearch && matchesStatus && matchesDept && matchesCategory) ? 
                                    'block' : 'none';
            });
        }
        
        // Add event listeners for all filter controls
        [searchInput, layoutSelect, statusFilter, departmentFilter, categoryFilter].forEach(control => {
            control.addEventListener('change', filterFacilities);
        });
        searchInput.addEventListener('input', filterFacilities);
        
        // Add confirmation dialog for delete buttons
        document.querySelectorAll('.btn-delete').forEach(button => {
            button.addEventListener('click', function(e) {
                if (!confirm('Are you sure you want to delete this facility?')) {
                    e.preventDefault();
                }
            });
        });
        
        // Initialize the view
        filterFacilities();
        
        // Add functionality to the "Manage" buttons
        document.querySelectorAll('.btn-manage').forEach(button => {
            button.addEventListener('click', function() {
                const card = this.closest('.facility-card');
                const facilityName = card.querySelector('.card-title').textContent;
                alert(`Managing facility: ${facilityName}`);
                // In a real implementation, this would open an edit modal or redirect
                // window.location.href = `/manage-facility?id=${card.dataset.facilityId}`;
            });
        });
    });
</script>

<!-- Modal for Facility Management -->
<div class="modal fade" id="manageFacilityModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Manage Facility</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Facility management form would go here -->
                <form id="facilityForm">
                    <div class="mb-3">
                        <label for="facilityName" class="form-label">Facility Name</label>
                        <input type="text" class="form-control" id="facilityName">
                    </div>
                    <div class="mb-3">
                        <label for="facilityDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="facilityDescription" rows="3"></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="facilityCategory" class="form-label">Category</label>
                            <select class="form-select" id="facilityCategory">
                                <option value="Sports">Sports Facility</option>
                                <option value="Conference">Conference Room</option>
                                <option value="Religious">Religious Facility</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="facilitySubcategory" class="form-label">Subcategory</label>
                            <input type="text" class="form-control" id="facilitySubcategory">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="facilityDepartment" class="form-label">Department</label>
                            <select class="form-select" id="facilityDepartment">
                                <option value="IT">IT Department</option>
                                <option value="HR">HR Department</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="facilityStatus" class="form-label">Status</label>
                            <select class="form-select" id="facilityStatus">
                                <option value="available">Available</option>
                                <option value="reserved">Reserved</option>
                                <option value="unavailable">Unavailable</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>